import{G as S,a as _,D as P}from"./DashboardLayout.e326a297.js";import{u as y,j as e,r as k,F as N,a as s,b as t,c as B,l as T}from"./app.0587b6c4.js";import{h as g}from"./index.m.4f4de470.js";import{I as D,a as L,P as $,N as w,g as E,S as z}from"./react-number-format.es.5bb4d89b.js";import{S as C}from"./sweetalert2.all.fa89d18e.js";import{a as v}from"./InputGroup.14843b34.js";function V({produk:a}){const{data:d,setData:i,post:n,processing:l,errors:f}=y({id:a.id,kategori_id:a.kategori_id,name:a.name,alias:a.alias,name_description:a.name_description,details:a.details,how_to_apply:a.how_to_apply,ingredients:a.ingredients,faq:a.faq});return e("form",{onSubmit:u=>{u.preventDefault(),!l&&n(g("produk.master.edit",a.id))},children:e(q,{data:d,setData:i,errors:f})})}function q({errors:a,data:d,setData:i}){const[n,l]=k.exports.useState(1);switch(n){case 1:return s(N,{children:[e(L,{errors:a,data:d,setData:i}),e(t.CardFooter,{className:"flex  gap-7 pt-2",children:e(t.Button,{type:"button",onClick:()=>l(2),children:"Next"})})]});case 2:return s(N,{children:[e(D,{errors:a,data:d,setData:i}),s(t.CardFooter,{className:"flex  gap-7 pt-2",children:[e(t.Button,{variant:"outlined",color:"red",type:"button",onClick:()=>l(1),children:"Back"}),e(t.Button,{type:"submit",children:"Update"})]})]});default:return e(N,{})}}function j({error:a,value:d,onChange:i=n=>n}){return s(N,{children:[s(t.Select,{error:!!a,label:"Pilih Warna",value:d,defaultChecked:!0,onChange:n=>i(n),children:[e(t.Option,{value:"default",className:"text-primary",children:"Umum"}),e(t.Option,{value:"red",className:"hover:text-red-500",children:"Red"}),e(t.Option,{value:"blue",className:"hover:bg-blue-500",children:"Blue"}),e(t.Option,{value:"black",className:"hover:bg-black",children:"Hitam"})]}),e(v,{message:a,className:"mt-1"})]})}function I(a){return S({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 3c-4.963 0-9 4.038-9 9s4.037 9 9 9 9-4.038 9-9-4.037-9-9-9zm0 16c-3.859 0-7-3.14-7-7s3.141-7 7-7 7 3.14 7 7-3.141 7-7 7zM12.707 12l2.646-2.646c.194-.194.194-.512 0-.707-.195-.194-.513-.194-.707 0l-2.646 2.646-2.646-2.647c-.195-.194-.513-.194-.707 0-.195.195-.195.513 0 .707l2.646 2.647-2.646 2.646c-.195.195-.195.513 0 .707.097.098.225.147.353.147s.256-.049.354-.146l2.646-2.647 2.646 2.646c.098.098.226.147.354.147s.256-.049.354-.146c.194-.194.194-.512 0-.707l-2.647-2.647z"}}]})(a)}function F({image:a,onDelete:d}){const{data:i,setData:n,errors:l,post:f}=y(a);k.exports.useEffect(()=>(n(a),()=>{}),[a]);const m=h=>(h.preventDefault(),i.id?f(g("produk_image.edit",i.id),{preserveScroll:!0}):f(g("produk_image.add"),{preserveScroll:!0}));let u=k.exports.useRef(null);return k.exports.useEffect(()=>((i!==a||Object.keys(l).length>0)&&u.current?(u.current.classList.add("opacity-100","translate-y-0"),u.current.classList.remove("opacity-0","-translate-y-full","hidden")):u.current&&(u.current.classList.remove("opacity-100","translate-y-0"),u.current.classList.add("opacity-0","-translate-y-full","hidden")),()=>{}),[i]),s("form",{className:"rounded border shadow p-3 relative group",onSubmit:m,children:[e("button",{type:"button",onClick:async h=>{await d()},className:"absolute right-1 top-2 h-6 w-6 overflow-hidden group-hover:z-20",children:e(I,{className:"h-6 w-6 text-red-300 hover:text-red-500  group-hover:opacity-100  opacity-0 group-hover:translate-y-0 -translate-y-full transform transition-all ease-in-out duration-500"})}),s("div",{className:"image-src mb-4",children:[e($,{onChange:h=>n("image",h),src:a.image_link}),e(v,{message:l.image,className:"mt-1"})," "]}),s("div",{className:"input-desc",children:[e("div",{className:"mt-1",children:e(j,{onChange:h=>n("color",h),value:i.color,error:l.color})}),s("div",{className:"mt-5",children:[e(t.Input,{error:!!l.name,label:"Keterangan",value:i.name,onChange:h=>n("name",h.target.value)}),e(v,{message:l.name,className:"mt-1"})]})]}),s("div",{className:"my-2 pt-2 border-t flex w-full gap-3",ref:u,children:[e(t.Button,{onClick:h=>n(a),size:"sm",variant:"outlined",color:"yellow",type:"reset",children:"Reset"}),e(t.Button,{type:"submit",size:"sm",children:"Save"})]})]})}function O({images:a=[]}){const{errors:d}=B().props,[i,n]=k.exports.useState(a),l=()=>{n([...i,{name:"",color:"",image:"",produk_id:a[0].produk_id}])},f=(m,u)=>{if(!m.id)return n(i.filter((b,h)=>h!=u));C.fire({title:"Apakah anda yakin?",icon:"question",showCancelButton:!0,showConfirmButton:!0}).then(b=>{b.isConfirmed&&T.Inertia.delete(g("produk_image.delete",m.id))})};return k.exports.useEffect(()=>(Object.keys(d).length<1&&n(a),()=>{}),[a]),s(t.CardBody,{children:[e("div",{className:"flex gap-4 flex-wrap",children:i.map((m,u)=>e("div",{className:"w-full sm:w-[calc(50%-16px)] md:w-[calc(33.33%-32px)]",children:e(F,{onDelete:()=>f(m,u),image:m})},u))}),e("div",{className:"my-4",children:e(t.IconButton,{onClick:m=>l(),children:e(_,{})})})]})}function R({variants:a}){if(!a)return e(N,{});const{data:d,setData:i,post:n,errors:l}=y({variants:a}),f=(o,r,c)=>{let p=[...d.variants],x=p[r];x[c]=o.target.value,i({variants:p})},m=(o,r,c)=>{let p=[...d.variants],x=p[o];x[c]=r.floatValue,i({variants:p})},u=()=>{i({variants:[...d.variants,{name_variant:"",price:0,price_after_diskon:0,qty:0}]})},b=async(o,r)=>{if(d.variants.length===1)return C.fire({text:"Maaf harus ada satu varian",icon:"error"});i({variants:d.variants.filter((c,p)=>p!==r)})};return s("form",{onSubmit:o=>{o.preventDefault(),n(g("produk_image.update-many",a[0].produk_id))},children:[e("ul",{children:d.variants.map((o,r)=>s("li",{className:"flex items-start gap-2 border-b  pb-3 mb-3 last:border-b-0",children:[e("button",{type:"button",onClick:c=>b(c,r),children:e(I,{className:"h-6 w-6 text-red-300 hover:text-red-500   transform transition-all ease-in-out duration-500"})}),s("div",{className:"w-full flex flex-col sm:flex-row gap-2",children:[e("div",{className:"sm:w-2/6",children:e("div",{className:"flex items-start gap-2",children:s("div",{className:"w-full",children:[e(t.Input,{error:!!l[`variants.${r}.name_variant`],label:"Nama Variant",value:o.name_variant,onChange:c=>f(c,r,"name_variant")}),e(v,{message:l[`variants.${r}.name_variant`],className:"mt-1"})]})})}),s("div",{className:"md:w-1/6",children:[e(w,{value:o.price,label:"Harga",customInput:t.Input,thousandSeparator:",",className:"text-right",prefix:"Rp.",onValueChange:(c,p)=>m(r,c,"price"),error:!!l[`variants.${r}.price`]}),e(v,{message:l[`variants.${r}.price`],className:"mt-1"})]}),s("div",{className:"md:w-1/6",children:[e(w,{value:o.price_after_diskon,label:"Harga Setelah Diskon",customInput:t.Input,thousandSeparator:",",className:"text-right",prefix:"Rp.",onValueChange:(c,p)=>m(r,c,"price_after_diskon"),error:!!l[`variants.${r}.price_after_diskon`]}),e(v,{message:l[`variants.${r}.price_after_diskon`],className:"mt-1"})]}),s("div",{className:"md:w-1/6",children:[e(w,{value:o.qty,label:"Jumlah",customInput:t.Input,thousandSeparator:",",className:"text-right",onValueChange:(c,p)=>m(r,c,"qty"),error:!!l[`variants.${r}.qty`]}),e(v,{message:l[`variants.${r}.qty`],className:"mt-1"})]})]})]},r))}),e("div",{className:"flex w-full justify-end",children:e(t.IconButton,{onClick:o=>u(),children:e(_,{})})}),s("div",{className:"my-2 pt-2 border-t flex w-full gap-3",children:[e(t.Button,{onClick:o=>i({variants:a}),size:"sm",variant:"outlined",color:"yellow",type:"reset",children:"Reset"}),e(t.Button,{type:"submit",size:"sm",children:"Save"})]})]})}function H({links:a}){const[d,i]=k.exports.useState([]),{data:n,setData:l,post:f,errors:m}=y({links:a}),u=(o,r,c)=>{if(!n.links)return;let p=[...n.links],x=p[r];x[c]=o.target.value,l("links",p)},b=()=>{!n.links||l("links",[...n.links,{toko_id:0,link:""}])};return k.exports.useEffect(()=>(E().then(o=>{var r;i(((r=o.data)==null?void 0:r.data)||[])}).catch(),()=>{}),[]),s("form",{onSubmit:o=>{o.preventDefault(),f(g("produk_link.update-many",a[0].produk_id))},children:[n.links.map((o,r)=>s("div",{className:"w-full flex gap-2 border-b pb-3 mb-3 last:border-b-0",children:[e("div",{className:"min-w-[200px]",children:e(z,{error:m[`links.${r}.toko_id`],value:o.toko_id,onChange:c=>{if(!n.links)return;let p=[...n.links],x=p[r];x.toko_id=c.value,l("links",p)},tokos:d})}),s("div",{className:"w-full min-w-[100px]",children:[e("div",{children:"Link Produk"}),e(t.Input,{error:!!m[`links.${r}.link`],label:"Link",value:o.link,onChange:c=>u(c,r,"link")}),e(v,{message:m[`links.${r}.link`],className:"mt-1"})]})]},r)),e("div",{className:"flex w-full justify-end",children:e(t.IconButton,{onClick:o=>b(),children:e(_,{})})}),s("div",{className:"my-2 pt-2 border-t flex w-full gap-3",children:[e(t.Button,{onClick:o=>l({links:a}),size:"sm",variant:"outlined",color:"yellow",type:"reset",children:"Reset"}),e(t.Button,{type:"submit",size:"sm",children:"Save"})]})]})}function W({produk:a}){return e(P,{title:"Edit produk",children:s(t.Card,{className:"mt-20",children:[e(t.CardHeader,{variant:"gradient",color:"blue-gray",className:"px-4 mr-auto h-10 place-items-center flex w-auto ",children:"Edit Product"}),e("div",{className:"sm:m-6 m-2",children:s(t.Tabs,{value:"detail_produk",children:[s(t.TabsHeader,{className:"flex w-full overflow-x-auto ",children:[e(t.Tab,{value:"detail_produk",className:"flex w-auto px-4  text-xs sm:text-base",children:"Detail Produk"}),e(t.Tab,{value:"gambar_produk",className:"flex w-auto px-4 text-xs sm:text-base",children:"Gambar"}),e(t.Tab,{value:"variant_produk",className:"flex w-auto px-4 text-xs sm:text-base",children:"Variant Produk"}),e(t.Tab,{value:"link_produk",className:"flex w-auto px-2 sm:px-4 text-xs sm:text-base",children:"Link Produk"})]}),s(t.TabsBody,{children:[e(t.TabPanel,{value:"detail_produk",className:"px-0",children:e("div",{className:"-mx-4 sm:mx-0",children:e(V,{produk:a.data})})}),e(t.TabPanel,{value:"gambar_produk",className:"px-0",children:s("div",{className:"-mx-4 sm:mx-0",children:[e(O,{images:a.data.images})," "]})}),e(t.TabPanel,{value:"variant_produk",className:"px-0 border  my-2 rounded shadow p-4",children:a.data.variants&&e(R,{variants:a.data.variants})}),e(t.TabPanel,{value:"link_produk",className:"px-0 border  my-2 rounded shadow p-4",children:a.data.links&&e(H,{links:a.data.links})})]})]})})]})})}export{W as default};
