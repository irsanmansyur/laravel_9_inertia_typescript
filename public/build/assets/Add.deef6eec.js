import{a as i,F as h,b as t,j as e,r as f,u as N}from"./app.903072bf.js";import{F as C,a as b,D as x}from"./DashboardLayout.82d12787.js";import{P as I,g as y,S as _,N as v,I as w,a as B}from"./react-number-format.es.635c5cf8.js";import{a as g}from"./InputGroup.aead2027.js";import{h as S}from"./index.m.4f4de470.js";function $({error:l,index:a,color:o,data:m,setData:u}){const p=s=>{if(!m.images)return;const n=[...m.images];n[a].color=s,u({...m,images:n})};return i(h,{children:[i(t.Select,{error:!!l,label:"Pilih Warna",value:o,defaultChecked:!0,onChange:p,children:[e(t.Option,{value:"default",className:"text-primary",children:"Umum"}),e(t.Option,{value:"red",className:"hover:text-red-500",children:"Red"}),e(t.Option,{value:"blue",className:"hover:bg-blue-500",children:"Blue"}),e(t.Option,{value:"black",className:"hover:bg-black",children:"Hitam"})]}),e(g,{message:l,className:"mt-1"})]})}function F({errors:l,data:a,setData:o}){if(!a.images)return e(h,{});f.exports.useRef(null);const m=(s,n)=>{if(!a.images)return;let r=[...a.images],c=r[n];c.name=s.target.value,o("images",r)};function u(s,n){if(!a.images)return;let r=[...a.images],c=r[n];c.image=s,o("images",r)}const p=()=>{!a.images||o("images",[...a.images,{name:"",color:"",image:""}])};return i(t.CardBody,{children:[a.images.map((s,n)=>i("div",{className:"w-full flex gap-2 border-b pb-3 mb-3 last:border-b-0",children:[a.images&&a.images.length>1&&e(t.IconButton,{color:"red",className:"mt-1",onClick:r=>{var c;return o("images",(c=a.images)==null?void 0:c.filter((d,k)=>k!==n))},children:e(C,{})}),i("div",{className:"w-1/3",children:[e("div",{className:"mt-1",children:e($,{error:l[`images.${n}.color`],index:n,color:s.color,data:a,setData:o})}),i("div",{className:"mt-5",children:[e(t.Input,{error:!!l[`images.${n}.name`],label:"Keterangan",value:s.name,onChange:r=>m(r,n)}),e(g,{message:l[`images.${n}.name`],className:"mt-1"})]})]}),i("div",{className:"w-1/3",children:[e(I,{src:s.image_link,onChange:u,index:n}),e(g,{message:l[`images.${n}.image`],className:"mt-1"})]})]},n)),e(t.IconButton,{onClick:s=>p(),children:e(b,{})})]})}function P({errors:l,data:a,setData:o}){if(!a.links)return e(h,{});const[m,u]=f.exports.useState([]),p=(n,r,c)=>{if(!a.links)return;let d=[...a.links],k=d[r];k[c]=n.target.value,o("links",d)},s=()=>{!a.links||o("links",[...a.links,{toko_id:0,link:""}])};return f.exports.useEffect(()=>(y().then(n=>{var r;u(((r=n.data)==null?void 0:r.data)||[])}).catch(),()=>{}),[]),i(t.CardBody,{children:[a.links.map((n,r)=>i("div",{className:"w-full flex gap-2 border-b pb-3 mb-3 last:border-b-0",children:[e("div",{className:"min-w-[200px]",children:e(_,{error:l[`links.${r}.toko_id`],value:n.toko_id,onChange:c=>{if(!a.links)return;let d=[...a.links],k=d[r];k.toko_id=c.value,o("links",d)},tokos:m})}),i("div",{className:"w-full min-w-[100px]",children:[e("div",{children:"Link Produk"}),e(t.Input,{error:!!l[`links.${r}.link`],label:"Link",value:n.link,onChange:c=>p(c,r,"link")}),e(g,{message:l[`links.${r}.link`],className:"mt-1"})]})]},r)),e(t.IconButton,{onClick:n=>s(),children:e(b,{})})]})}function V({errors:l,data:a,setData:o}){if(!a.variants)return e(h,{});const m=(s,n,r)=>{if(!a.variants)return;let c=[...a.variants],d=c[s];d[r]=n.floatValue,o("variants",c)},u=(s,n,r)=>{if(!a.variants)return;let c=[...a.variants],d=c[n];d[r]=s.target.value,o("variants",c)},p=()=>{!a.variants||o("variants",[...a.variants,{name_variant:"",price:0,price_after_diskon:0,qty:0}])};return i(t.CardBody,{children:[a.variants.map((s,n)=>i("div",{className:"w-full flex gap-2 border-b pb-3 mb-3 last:border-b-0",children:[i("div",{className:"w-2/6",children:[e(t.Input,{error:!!l[`variants.${n}.name_variant`],label:"Nama Variant",value:s.name_variant,onChange:r=>u(r,n,"name_variant")}),e(g,{message:l[`variants.${n}.name_variant`],className:"mt-1"})]}),i("div",{className:"w-1/6",children:[e(v,{value:s.price,label:"Harga",customInput:t.Input,thousandSeparator:",",className:"text-right",prefix:"Rp.",onValueChange:(r,c)=>m(n,r,"price"),error:!!l[`variants.${n}.price`]}),e(g,{message:l[`variants.${n}.price`],className:"mt-1"})]}),i("div",{className:"w-1/6",children:[e(v,{value:s.price_after_diskon,label:"Harga Setelah Diskon",customInput:t.Input,thousandSeparator:",",className:"text-right",prefix:"Rp.",onValueChange:(r,c)=>m(n,r,"price_after_diskon"),error:!!l[`variants.${n}.price_after_diskon`]}),e(g,{message:l[`variants.${n}.price_after_diskon`],className:"mt-1"})]}),i("div",{className:"w-1/6",children:[e(v,{value:s.qty,label:"Jumlah",customInput:t.Input,thousandSeparator:",",className:"text-right",onValueChange:(r,c)=>m(n,r,"qty"),error:!!l[`variants.${n}.qty`]}),e(g,{message:l[`variants.${n}.qty`],className:"mt-1"})]})]},n)),e(t.IconButton,{onClick:s=>p(),children:e(b,{})})]})}function j({errors:l,data:a,setData:o}){const[m,u]=f.exports.useState(1);switch(m){case 1:return i(h,{children:[e(B,{errors:l,data:a,setData:o}),e(t.CardFooter,{className:"flex   justify-end pt-2",children:e(t.Button,{type:"button",onClick:()=>u(2),children:"Next"})})]});case 2:return i(h,{children:[e(w,{errors:l,data:a,setData:o}),i(t.CardFooter,{className:"flex   justify-between pt-2",children:[e(t.Button,{variant:"outlined",color:"red",type:"button",onClick:()=>u(1),children:"Back"}),e(t.Button,{type:"button",onClick:()=>u(3),children:"Next"})]})]});case 3:return i(h,{children:[e(F,{errors:l,data:a,setData:o}),i(t.CardFooter,{className:"flex justify-between pt-2",children:[e(t.Button,{variant:"outlined",color:"red",type:"button",onClick:()=>u(2),children:"Back"}),e(t.Button,{type:"button",onClick:()=>u(4),children:"Next"})]})]});case 4:return i(h,{children:[e(V,{errors:l,data:a,setData:o}),i(t.CardFooter,{className:"flex  justify-between pt-2",children:[e(t.Button,{variant:"outlined",color:"red",type:"button",onClick:()=>u(3),children:"Back"}),e(t.Button,{typeof:"string",type:"button",onClick:()=>u(5),children:"Next"})]})]});case 5:return i(h,{children:[e(P,{errors:l,data:a,setData:o}),i(t.CardFooter,{className:"flex  gap-7 pt-2",children:[e(t.Button,{variant:"outlined",color:"red",type:"button",onClick:()=>u(4),children:"Back"}),e(t.Button,{type:"submit",color:"light-blue",children:"Save"})]})]});default:return e(h,{})}}function R(){f.exports.useState(1);const{data:l,setData:a,post:o,processing:m,errors:u}=N({name:"",alias:"",images:[{name:"",color:"",image:""}],variants:[{name_variant:"",price:0,price_after_diskon:0,qty:0}],links:[{toko_id:0,link:""}]}),p=s=>{s.preventDefault(),!m&&o(S("produk.master.add"))};return e(x,{title:"Tambah produk",children:i(t.Card,{className:"mt-20",children:[e(t.CardHeader,{variant:"gradient",color:"blue-gray",className:"px-4 mr-auto h-10 place-items-center flex w-auto ",children:"Tambah Product"}),e("form",{onSubmit:p,children:e(j,{errors:u,data:l,setData:a})})]})})}export{R as default};
